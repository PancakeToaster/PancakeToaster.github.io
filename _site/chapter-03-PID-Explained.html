<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li:not(:nth-child(4)) > a, .site-nav > ul.nav-list:first-child > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(4) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(4) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(4) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Chapter 3: PID Explained | Robot Control Documentation</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Chapter 3: PID Explained" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Professional-grade control system documentation for VEX V5 robots." /> <meta property="og:description" content="Professional-grade control system documentation for VEX V5 robots." /> <link rel="canonical" href="http://localhost:4000/chapter-03-PID-Explained.html" /> <meta property="og:url" content="http://localhost:4000/chapter-03-PID-Explained.html" /> <meta property="og:site_name" content="Robot Control Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Chapter 3: PID Explained" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Professional-grade control system documentation for VEX V5 robots.","headline":"Chapter 3: PID Explained","url":"http://localhost:4000/chapter-03-PID-Explained.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <header class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Robot Control Documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Menu" aria-expanded="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/README.html" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/chapter-01-Autonomous-Chassis-Movement.html" class="nav-list-link">Chapter 1: Autonomous Chassis Movement</a></li><li class="nav-list-item"><a href="/chapter-02-Motor-Control-Algorithms.html" class="nav-list-link">Chapter 2: Motor Control Algorithms</a></li><li class="nav-list-item"><a href="/chapter-03-PID-Explained.html" class="nav-list-link">Chapter 3: PID Explained</a></li><li class="nav-list-item"><a href="/chapter-04-PID-Algorithm-Breakdown.html" class="nav-list-link">Chapter 4: PID Algorithm Breakdown</a></li><li class="nav-list-item"><a href="/chapter-05-Odometry.html" class="nav-list-link">Chapter 5: Odometry</a></li><li class="nav-list-item"><a href="/chapter-06-Pure-Pursuit-and-Boomerang.html" class="nav-list-link">Chapter 6: Pure Pursuit and Boomerang</a></li><li class="nav-list-item"><a href="/chapter-07-Pure-Pursuit.html" class="nav-list-link">Chapter 7: Pure Pursuit</a></li><li class="nav-list-item"><a href="/chapter-08-Boomerang.html" class="nav-list-link">Chapter 8: Boomerang</a></li><li class="nav-list-item"><a href="/chapter-09-Autonomous-Troubleshooting-Guide.html" class="nav-list-link">Chapter 9: Autonomous Troubleshooting Guide</a></li><li class="nav-list-item"><a href="/chapter-10-Documentation-of-Programming.html" class="nav-list-link">Chapter 10: Documentation of Programming</a></li><li class="nav-list-item"><a href="/appendix-A-Robot-Control-Library-Documentation.html" class="nav-list-link">Appendix A: Robot Control Library Documentation</a></li><li class="nav-list-item"><a href="/appendix-B-The-Robot-Coding-Glossary.html" class="nav-list-link">Appendix B: The Robot Coding Glossary</a></li></ul> </nav> <div class="d-md-block d-none"> <div class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </div> </div> </header> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Robot Control Documentation" autocomplete="off"> <label for="search-input" class="search-label"> <span class="sr-only">Search Robot Control Documentation</span> <svg viewBox="0 0 24 24" class="search-icon" aria-hidden="true"><use xlink:href="#svg-search"></use></svg> </label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/PancakeToaster/PancakeToaster.github.io" class="site-button" > GitHub Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <p>To make PID as simple as possible, let‚Äôs stop thinking about math and start thinking about <strong>driving a car.</strong></p> <p>Imagine you are sitting in the passenger seat, and your job is to tell the driver how to push the gas pedal to stop exactly at a red light.</p><hr /> <h3 id="1-p-is-for-proportion-the-look-ahead-rule"> <a href="#1-p-is-for-proportion-the-look-ahead-rule" class="anchor-heading" aria-labelledby="1-p-is-for-proportion-the-look-ahead-rule"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. <strong>P</strong> is for <strong>Proportion</strong> (The ‚ÄúLook Ahead‚Äù Rule) </h3> <p><strong>The Concept:</strong> The farther away the red light is, the harder you tell the driver to push the gas. As you get closer, you tell them to let off the pedal.</p> <ul> <li> <p><strong>In the code:</strong> <code class="language-plaintext highlighter-rouge">proportional = kp * current_error;</code></p> </li> <li> <p><strong>Simple Explanation:</strong> If you are 100 feet away, you apply a lot of power. If you are only 1 foot away, you apply almost zero power. It‚Äôs a simple ratio.</p> </li> <li> <p><strong>The Problem:</strong> If you only use <strong>P</strong>, the car might stop a few inches short because there isn‚Äôt enough power to overcome the friction of the tires on the road.</p> </li> </ul><hr /> <h3 id="2-i-is-for-integral-the-impatient-rule"> <a href="#2-i-is-for-integral-the-impatient-rule" class="anchor-heading" aria-labelledby="2-i-is-for-integral-the-impatient-rule"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. <strong>I</strong> is for <strong>Integral</strong> (The ‚ÄúImpatient‚Äù Rule) </h3> <p><strong>The Concept:</strong> Imagine the car has stopped 2 inches short of the line. The driver isn‚Äôt pushing the gas because <strong>P</strong> is too small. You wait 1 second‚Ä¶ 2 seconds‚Ä¶ 3 seconds‚Ä¶ and you get impatient. You start yelling, ‚ÄúGo! Go! Go!‚Äù until the driver nudges the car that last little bit.</p> <ul> <li> <p><strong>In the code:</strong> <code class="language-plaintext highlighter-rouge">sum_error += current_error;</code></p> </li> <li> <p><strong>Simple Explanation:</strong> This is a timer. It adds up all the time you spent <strong>not</strong> at the target. The longer you wait, the higher the power grows, forcing the robot to finish the move.</p> </li> <li> <p><strong>The Problem:</strong> If you get <strong>too</strong> impatient, you might make the driver slam the gas at the last second and overshoot the line.</p> </li> </ul><hr /> <h3 id="3-d-is-for-derivative-the-brake-rule"> <a href="#3-d-is-for-derivative-the-brake-rule" class="anchor-heading" aria-labelledby="3-d-is-for-derivative-the-brake-rule"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. <strong>D</strong> is for <strong>Derivative</strong> (The ‚ÄúBrake‚Äù Rule) </h3> <p><strong>The Concept:</strong> You see the red light coming up fast. You look at the speedometer and realize, ‚ÄúWait, we are going too fast to stop in time!‚Äù You tell the driver to start tapping the brakes <strong>before</strong> you hit the line.</p> <ul> <li> <p><strong>In the code:</strong> <code class="language-plaintext highlighter-rouge">derivative = current_error - prev_error;</code></p> </li> <li> <p><strong>Simple Explanation:</strong> This looks at your <strong>speed</strong>. If your error is disappearing very quickly, it means you are moving fast. The <strong>D</strong> term creates ‚Äúcounter-power‚Äù (braking) to slow you down so you land perfectly.</p> </li> </ul><hr /> <h3 id="how-it-looks-in-your-code-the-line-by-line"> <a href="#how-it-looks-in-your-code-the-line-by-line" class="anchor-heading" aria-labelledby="how-it-looks-in-your-code-the-line-by-line"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How it looks in your code (The Line-by-Line) </h3> <p>C++</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 1. How far is the goal?
current_error = target - input; 

// 2. How fast are we moving? (The Brake)
derivative = current_error - prev_error; 

// 3. Are we stuck? (The Muscle)
// If we are close to the goal, start the "Impatient Timer"
if (fabs(current_error) &lt; integral_range) {
    sum_error += current_error; 
}

// 4. Final Math: Power = (Push) + (Yelling) - (Braking)
return (kp * current_error) + (ki * sum_error) + (kd * derivative);
</code></pre></div></div><hr /> <h3 id="summary-table-for-students"> <a href="#summary-table-for-students" class="anchor-heading" aria-labelledby="summary-table-for-students"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Summary Table for Students </h3> <div class="table-wrapper"><table> <thead> <tr> <th><strong>Part</strong></th> <th><strong>Nickname</strong></th> <th><strong>What it does</strong></th> <th><strong>What happens if it‚Äôs too high?</strong></th> </tr> </thead> <tbody> <tr> <td><strong>P</strong></td> <td>The Gas</td> <td>Gets you moving toward the goal.</td> <td>The robot will shake or bounce like a spring.</td> </tr> <tr> <td><strong>I</strong></td> <td>The Muscle</td> <td>Fixes the ‚Äúalmost there‚Äù gap.</td> <td>The robot will zoom past the goal or go crazy.</td> </tr> <tr> <td><strong>D</strong></td> <td>The Brake</td> <td>Smooths out the landing.</td> <td>The robot will move very slowly and feel ‚Äúheavy.‚Äù</td> </tr> </tbody> </table></div> <h3 id="a-golden-rule-for-coding-it"> <a href="#a-golden-rule-for-coding-it" class="anchor-heading" aria-labelledby="a-golden-rule-for-coding-it"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A ‚ÄúGolden Rule‚Äù for Coding It: </h3> <p>When you start testing your robot, always set <strong>I</strong> and <strong>D</strong> to zero. Only change <strong>P</strong> until the robot moves. Once it moves but starts bouncing, add a little <strong>D</strong> to ‚Äúsoak up‚Äù the bounce. Only add <strong>I</strong> if the robot is consistently stopping short.</p> <h2 id="Ô∏è-the-3-step-tuning-guide-the-trial-and-error-method"> <a href="#Ô∏è-the-3-step-tuning-guide-the-trial-and-error-method" class="anchor-heading" aria-labelledby="Ô∏è-the-3-step-tuning-guide-the-trial-and-error-method"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üõ†Ô∏è The 3-Step Tuning Guide (The ‚ÄúTrial and Error‚Äù Method) </h2> <p>Before you start, make sure your robot is on a full field with a fresh battery. Set your <code class="language-plaintext highlighter-rouge">ki</code> and <code class="language-plaintext highlighter-rouge">kd</code> to <strong>0</strong> in your code.</p> <h4 id="step-1-find-your-p-the-gas"> <a href="#step-1-find-your-p-the-gas" class="anchor-heading" aria-labelledby="step-1-find-your-p-the-gas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Step 1: Find your P (The Gas)</strong> </h4> <p>Start with a very small number for <code class="language-plaintext highlighter-rouge">kp</code> (like 0.1).</p> <ol> <li> <p>Run the robot. It probably won‚Äôt reach the target.</p> </li> <li> <p>Keep doubling the number (0.2, 0.4, 0.8‚Ä¶) until the robot reaches the target.</p> </li> <li> <p><strong>The Goal:</strong> You want the robot to move quickly to the target, overshoot it slightly, and ‚Äúbounce‚Äù back and forth maybe 2 or 3 times before stopping.</p> <ul> <li> <p><em>If it shakes violently:</em> Your <code class="language-plaintext highlighter-rouge">kp</code> is too high!</p> </li> <li> <p><em>If it never reaches the goal:</em> Your <code class="language-plaintext highlighter-rouge">kp</code> is too low.</p> </li> </ul> </li> </ol> <h4 id="step-2-find-your-d-the-brake"> <a href="#step-2-find-your-d-the-brake" class="anchor-heading" aria-labelledby="step-2-find-your-d-the-brake"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Step 2: Find your D (The Brake)</strong> </h4> <p>Now that your robot is ‚Äúbouncing‚Äù because of the high <code class="language-plaintext highlighter-rouge">kp</code>, we use <code class="language-plaintext highlighter-rouge">kd</code> to smooth it out.</p> <ol> <li> <p>Start with a small <code class="language-plaintext highlighter-rouge">kd</code> (like 1.0).</p> </li> <li> <p>Increase it slowly.</p> </li> <li> <p><strong>The Goal:</strong> You want the <code class="language-plaintext highlighter-rouge">kd</code> to ‚Äúsoak up‚Äù the bounce. The robot should zoom toward the target and slow down perfectly right at the line without any shaking.</p> <ul> <li><em>If the robot moves like it‚Äôs driving through molasses:</em> Your <code class="language-plaintext highlighter-rouge">kd</code> is too high.</li> </ul> </li> </ol> <h4 id="step-3-find-your-i-the-muscle"> <a href="#step-3-find-your-i-the-muscle" class="anchor-heading" aria-labelledby="step-3-find-your-i-the-muscle"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <strong>Step 3: Find your I (The Muscle)</strong> </h4> <p>Most of the time, you don‚Äôt even need <code class="language-plaintext highlighter-rouge">ki</code>. But if your robot stops exactly 0.5 inches away from the goal every time and won‚Äôt move that last bit:</p> <ol> <li> <p>Set a very tiny <code class="language-plaintext highlighter-rouge">ki</code> (like 0.001).</p> </li> <li> <p><strong>The Goal:</strong> The robot should settle near the target, wait half a second, and then ‚Äúnudge‚Äù itself perfectly onto the line.</p> </li> </ol><hr /> <h3 id="-final-pro-tips-for-students"> <a href="#-final-pro-tips-for-students" class="anchor-heading" aria-labelledby="-final-pro-tips-for-students"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> üí° Final Pro-Tips for Students </h3> <ul> <li> <p><strong>Fresh Battery:</strong> A battery at 100% pushes harder than a battery at 50%. Always tune with a battery around 80-90%.</p> </li> <li> <p><strong>The ‚ÄúPush‚Äù Test:</strong> While your PID is holding the robot at a target, try to push the robot with your hand. A well-tuned PID will fight back and return to the spot immediately.</p> </li> <li> <p><strong>Keep a Notebook:</strong> Write down your numbers! ‚ÄúKp 2.5 was too shaky, Kp 2.1 was perfect.‚Äù You will forget these numbers otherwise.</p> </li> </ul> </main> <hr> <footer> <div class="d-md-none"> <div class="mt-4 fs-2"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </div> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
